# Kickstart file automatically generated by anaconda.

#version=DEVEL
install
#cdrom
url --url=http://puppet.semperti.local/repo/
lang en_US.UTF-8
keyboard us
## Que arranque la red en el ETH0 y con DHCP
network --onboot yes --device eth0 --bootproto dhcp --noipv6
## PAso la password de Root "redhat"
rootpw  --iscrypted $6$xGJwqKDYjwhjiZvN$cm1oDSyuquIaYNW8wmxwiRkS8i92pOWHd4YmbGaCw7hhIEjqbp.tF8DOK9CEKXpbjmTOMoQLoCFtJuTrk0Cus1
firewall --service=ssh
authconfig --enableshadow --passalgo=sha512
selinux --enforcing
timezone --utc America/Argentina/Buenos_Aires

## Hago mierda el MBR
zerombr 
bootloader --location=mbr --driveorder=sda --append="crashkernel=auto rhgb quiet"
# The following is the partition information you requested
# Note that any partitions you deleted are not expressed
# here so unless you clear all partitions first, this is
# not guaranteed to work
## Borro el Disco y reparticiono
clearpart --all 
## Creo el /boot
part /boot --fstype=ext4 --size=500
## Creo el PV
part pv.008002 --grow --size=1
## Creo el VG
volgroup VolGroup --pesize=4096 pv.008002
## Creo el / y el SWAP
logvol / --fstype=ext4 --name=lv_root --vgname=VolGroup --grow --size=1024 --maxsize=51200
logvol swap --name=lv_swap --vgname=VolGroup --grow --size=992 --maxsize=992


%packages --nobase
@core
wget
autofs
## Sin esto no tengo SCP y SSH
openssh-clients
## Begin Puppet need ##
#rubygems
## Puppet Agent - Pero necesita el REPO ##
##puppet
###
## End Puppet Need ##
%end

%post --nochroot
### Me traigo la configuracion del Repo y la dejo en el dir del Disco Duro
curl http://puppet.semperti.local/rhel-DVD.repo >> /mnt/sysimage/etc/yum.repos.d/rhel-DVD.repo
%end

## Activo el Servicio de SSH
services --enabled=ssh

## no dejo que pregunte si rebooteo!
reboot
